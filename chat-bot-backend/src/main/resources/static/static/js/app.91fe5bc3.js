(function(){"use strict";var t={4034:function(t,e,n){var s=n(5130),r=n(6768);function o(t,e){const n=(0,r.g2)("router-link"),s=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("nav",null,[(0,r.bF)(n,{to:"/"},{default:(0,r.k6)(()=>e[0]||(e[0]=[(0,r.eW)("Home",-1)])),_:1,__:[0]}),e[2]||(e[2]=(0,r.eW)(" | ",-1)),(0,r.bF)(n,{to:"/about"},{default:(0,r.k6)(()=>e[1]||(e[1]=[(0,r.eW)("About",-1)])),_:1,__:[1]})]),(0,r.bF)(s)],64)}var a=n(1241);const i={},u=(0,a.A)(i,[["render",o]]);var c=u,l=n(1387),d=n(4232);const f={class:"chat-container"},h={class:"chat-box",ref:"chatBox"},m={key:0,class:"message ai"},p={class:"input-area"},v=["disabled"],g=["disabled"];function b(t,e,n,o,a,i){return(0,r.uX)(),(0,r.CE)("div",f,[e[4]||(e[4]=(0,r.Lk)("h1",null,"AI 聊天机器人",-1)),(0,r.Lk)("div",h,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.messages,(t,e)=>((0,r.uX)(),(0,r.CE)("div",{key:e,class:(0,d.C4)(["message",t.sender])},[(0,r.Lk)("strong",null,(0,d.v_)("user"===t.sender?"你:":"AI:"),1),(0,r.Lk)("p",null,(0,d.v_)(t.text),1)],2))),128)),a.isStreaming?((0,r.uX)(),(0,r.CE)("div",m,[e[3]||(e[3]=(0,r.Lk)("strong",null,"AI:",-1)),(0,r.Lk)("p",null,(0,d.v_)(a.streamText),1)])):(0,r.Q3)("",!0)],512),(0,r.Lk)("div",p,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>a.userInput=t),onKeyup:e[1]||(e[1]=(0,s.jR)((...t)=>i.sendMessage&&i.sendMessage(...t),["enter"])),type:"text",placeholder:"输入消息...",disabled:a.isStreaming},null,40,v),[[s.Jo,a.userInput]]),(0,r.Lk)("button",{onClick:e[2]||(e[2]=(...t)=>i.sendMessage&&i.sendMessage(...t)),disabled:!a.userInput.trim()||a.isStreaming},(0,d.v_)(a.isStreaming?"发送中...":"发送"),9,g)])])}n(4114);var k={name:"ChatView",data(){return{messages:[],userInput:"",isStreaming:!1,streamText:""}},methods:{async sendMessage(){const t=this.userInput.trim();if(t&&!this.isStreaming){this.messages.push({sender:"user",text:t}),this.userInput="",this.isStreaming=!0,this.streamText="";try{const e=await fetch("/api/chat-stream",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t})});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=e.body.getReader(),s=new TextDecoder;let r=!0;while(r){const{done:t,value:e}=await n.read();if(!0===t)break;const r=s.decode(e,{stream:!0});this.streamText+=r,this.$nextTick(()=>{this.scrollToBottom()})}this.streamText&&this.messages.push({sender:"ai",text:this.streamText})}catch(e){console.error("发送消息失败:",e),this.messages.push({sender:"ai",text:"抱歉，AI 服务暂时不可用。"})}finally{this.isStreaming=!1,this.streamText="",this.scrollToBottom()}}},scrollToBottom(){const t=this.$refs.chatBox;t&&(t.scrollTop=t.scrollHeight)}},mounted(){this.scrollToBottom()}};const x=(0,a.A)(k,[["render",b],["__scopeId","data-v-eaf6003c"]]);var y=x;const T=[{path:"/",name:"home",component:y}],_=(0,l.aE)({history:(0,l.LA)("/"),routes:T});var w=_,O=n(782),I=(0,O.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,s.Ef)(c).use(I).use(w).mount("#app")}},e={};function n(s){var r=e[s];if(void 0!==r)return r.exports;var o=e[s]={exports:{}};return t[s].call(o.exports,o,o.exports,n),o.exports}n.m=t,function(){var t=[];n.O=function(e,s,r,o){if(!s){var a=1/0;for(l=0;l<t.length;l++){s=t[l][0],r=t[l][1],o=t[l][2];for(var i=!0,u=0;u<s.length;u++)(!1&o||a>=o)&&Object.keys(n.O).every(function(t){return n.O[t](s[u])})?s.splice(u--,1):(i=!1,o<a&&(a=o));if(i){t.splice(l--,1);var c=r();void 0!==c&&(e=c)}}return e}o=o||0;for(var l=t.length;l>0&&t[l-1][2]>o;l--)t[l]=t[l-1];t[l]=[s,r,o]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,s){var r,o,a=s[0],i=s[1],u=s[2],c=0;if(a.some(function(e){return 0!==t[e]})){for(r in i)n.o(i,r)&&(n.m[r]=i[r]);if(u)var l=u(n)}for(e&&e(s);c<a.length;c++)o=a[c],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(l)},s=self["webpackChunkchat_bot_frontend"]=self["webpackChunkchat_bot_frontend"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=n.O(void 0,[504],function(){return n(4034)});s=n.O(s)})();
//# sourceMappingURL=app.91fe5bc3.js.map